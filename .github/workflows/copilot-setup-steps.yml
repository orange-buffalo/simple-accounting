name: "Copilot Setup Steps"

on:
  pull_request_target:
    types: [opened, synchronize, reopened]

permissions:
  contents: read

jobs:
  setup-environment:
    name: "Setup Environment for Copilot"
    runs-on: ubuntu-22.04
    
    steps:
      - name: "Setup Project Environment"
        uses: ./.github/actions/setup-project-environment
        with:
          setup-playwright: 'true'

      - name: "Build Project"
        env:
          NODE_OPTIONS: "--max_old_space_size=4096"
        run: ./gradlew assemble --scan --console=plain --build-cache